# Экзаменационное задание
## Данное задание содержит:
### 1. Веб-сервис, хранящий список пользователей. 
   
Запись списка пользователей содержит следующую инфомрацию:
- id
- username
- email
- department
- data_joined

Для веб-сервиса реализованы следующие endpoint:
- /users
- /department
  
Доступные фильтры для endpoint - users:
* username - возвращает пользователя(пользователей) по полному или частичному соответствию поля username.
* department - возвращает пользователей принадлежащих данному департаменту.

Доступные фильтры для endpoint - department:
* name - возвращает департамент по полному или частичному соответствию названию департамента.


### 2. Тестирование веб-сервиса при помощи pytest.
Особенности выполнения тестового фреймворка:
* Тестовый фреймворк имеет класс клиента для осуществления запросов к тестируемому сервису.
* Тестовый фреймворк использует pytest.
* В рамках теста реализована функциональность fixtures (по запуску сервера).
* Реализовано логгирование для file и stdout.
* Тесты запускатся паралельно благодаря библиотеке pytest-xdist.

### 3. Пакование веб-сервиса и тестового фреймворка в docker-образ.  
Требования предъявляемые к docker образам.
* Образ с тестами должен иметь entrypoint для запуска тестов.В результате выполнения задания должны присутствовать оба dockerfile. 
Для совместной работы образа веб-сервиса и образа с тестами должен быть реализован docker -compose файл.

## Подготовка окружения:

Необходимо установить следующие библиотеки:

1 - pytest
2 - flask
3 - flask_restful
4 - pandas
5 - requests
6 - json
7 - pytest-xdist
> Для корректной работы кода и всех библиотек должен быть установлен python не младше python 3.0

## Быстрый запуск:
> Перед запуском необходимо загрузить репозиторий к себе на компьютер.

###1 - Для того чтобы запустить веб-приложение необходимо пройти в следующую директорию:

    cd api 
После чего необходимо запустить файл users.py
Информация о пользователях хранится в файле users_data.csv

###2 - Для того чтобы запустить тестовый фреймвок:

    cd api 
После чего необходимо через терминал прописать команду:

    pytest

###3 - Для того чтобы запустить docker- образы, необходимо перейти:

    cd ..
    cd test_compose
После чего необходимо через терминал прописать команду:

    docker-compose up -d

> Т.к запуск веб-приложения и тестового фреймворка происходит одновременно, возможна такая ситуация
> , что тестовый фреймворк запустится раньше чем веб приложение. В таком случае необходимо повторно запустить docker - образ.
___
Если есть необходимость запустить docker-образ веб-приложения и тестового фреймворка 
по-отдельности, то сделать это можно следующим образом:

1 - Веб приложение:

    cd ..
    cd api
После чего необходимо через терминал прописать команды:

    docker build -t getting-started .
    docker run -dp 8080:8080 getting-started

2 - Тестовый фреймворк:
> Для того чтобы тестовый фреймворк корректно отработал, предварительно запустите веб-приложение.

    cd ..
    cd tests
После чего необходимо через терминал прописать команды:

    docker build -t getting-started .
    docker run -dp 3000:3000 getting-started